{"pageProps":{"meta":{"title":"Story of Building XCalc","description":"Sharing how I built XCalc, an extended calculator.","tags":["experience","project"],"dateCreated":1623319200000,"estReadTime":7,"lastModifiedTime":1625310075871,"slug":"building-xcalc"},"sourceContent":"\n<TableOfContents source={sourceContent} slug={slug} />\n\n<linkableH2 slug={slug}>Why I built XCalc?</linkableH2>\n\nWe all have a pre-installed calculator app on our devices (except iPad users). They provide us with basic and some advanced operations. For the majority of people, in most cases, that is more than enough.\n\nBut, as a Math lover, sometimes, I ran into some problems which can be solved easily on a computer (or a calculator), but still not included in any of these existing calculator apps.\nFor example, prime factorization. It's easy for a small set of numbers (like 500, 360). But on a computer, it can be done in seconds (or even milliseconds). But I have never seen that functionality included in a calculator. And this is only one example. This felt like a gap for me. That’s why I decided to develop a calculator app that has these extra functions. That’s what XCalc is.\n\n\nNote that I only added the functions that are not available in those existing calculator apps. And I intentionally left out the functions like log or sqrt, because they are already available on the pre-installed calculator apps.\n\nSo, what functions did I add? [Here](https://x-calc.vercel.app/help) is a list. \n - is-prime: checks if a number is a prime number\n - factors: finds all the factors of a number\n - lcm: finds the least common multiple of a list a numbers\n - gcd: finds the greatest common divisor of a list a numbers\n - factorial: finds the n-th factorial\n - ratio: finds the minimum ratio in a list of numbers\n - nck: finds the [binomial coefficient](https://en.wikipedia.org/wiki/Binomial_coefficient) denoted by (n k)\n - prime-factorize: finds the prime factorization of the given number\n\nIf you like the idea of XCalc, you can try it [here](https://bit.ly/xcalc-web). From the website, XCalc can be installed to your devices (I don’t know if it is supported on all operating systems and all browsers).\nAnd [XCalc is available on Google Play Store](https://bit.ly/xcalc-app) as well.\n\nIf you are interested to see how XCalc is coded, Good news, XCalc is [open-sourced](http://github.com/sahithyandev/xcalc). If you find it hard to understand the code, let me know about that.\n\n<linkableH2 slug={slug}>How I built it</linkableH2>\n\n<linkableH3 slug={slug}>\n\t<CustomLink href=\"https://typescriptlang.org\">TypeScript</CustomLink>\n</linkableH3>\n\nTypeScript is a strict syntactical superset of JavaScript and adds optional strict typing to the language. It compiles to JavaScript.\n\nI decided to bring it into the code base mainly for two reasons. The important one is **prevention of many little bugs**. As TypeScript allows me to set types to everything, now I don’t have to be too concerned about the code now. I can be confident (in most cases) that I am not gonna run into any runtime errors.\nAnd the next one is, **reduced mind-overloading**. Which means, now, I don’t have to memorize the function parameter types and object structures. My IDE's intellisense takes care of that.\n\n<linkableH3 slug={slug}>UI Design</linkableH3>\n\nIt's highly recommended to design the UI before coding it. [Here's why](https://www.youtube.com/watch?v=ZyAsNw7XZ1c). \n\nHence, I decided to design the whole UI first (or at least try). I opened up [Figma](https://figma.com) and gave it a try. Here's what I designed.\n\n<img alt=\"XCalc Old UI design\" src=\"/post__images/building-xcalc/xcalc-old-design.jpg\" />\n\nI went with it. Because, the important thing about XCalc is its functionality; not the UI.\n\n\nWhen I made XCalc completely working, (as always) I stopped working on it. After about 3 months, I came back. I decided to rewrite the whole app with new (better) technologies. As a part of that, I redesigned the UI. It turned out to be pretty great.\n\n<img alt=\"XCalc New UI design\" src=\"/post__images/building-xcalc/xcalc-new-design.png\" />\n\n<linkableH3 slug={slug}><CustomLink href=\"https://reactjs.org\">React</CustomLink></linkableH3>\nWhen I first started developing XCalc, I didn't use any front-end libraries. I wanted to write all the code by myself. The state of the app (the input), the dynamic UI rendering were all done by the code I wrote. At first, It worked without any problems.  But when I came back after 3 months, I understood none of it. That's when I realized that I should have used a front-end library.\n\nWhen I started rewriting the app, I chose to go with React, which is my favorite front-end library.\n\nTo be honest, the React code is not that good either. But it is a lot more readable than my code.\n\n<linkableH3 slug={slug}><CustomLink href=\"https://sass-lang.com\">Sass</CustomLink></linkableH3>\nSass is a pre-compiler for CSS. It provides some additional functionalities which results in a better developer experience. That’s the one and only reason I decided to use Sass.\n\n<linkableH3 slug={slug}>Off-thread evaluations</linkableH3>\nBy default, the browser uses a single thread (\"main thread\") to run all the processes of a website. This is where the layout and paint are done. This is where the user events get processed. And also, this is where, the javascript runs. Which means, long-running JavaScript will block the thread, leading to an unresponsive page (== bad user experience)\n\nThis is where web workers come into play. Web workers are a simple means for web content to run scripts on background threads. This will make sure the main thread is free from getting stuck. [Learn more about web workers on MDN](https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API/Using_web_workers).\n\nXCalc never blocked the main thread (on my laptop and my phone), it worked without any problems. There were no performance issues at all. But, on the low-end phones, performance issues might rise.\n\nAnd, it's a good idea to use the main thread only for UI work. That's why the main thread is called \"UI thread\" on other platforms. So, I moved the evaluations of the input to a web worker. \n\n<linkableH3 slug={slug}>Offline support</linkableH3>\n<BlockQuote citationText=\"Google Developers Blog\" citationLink=\"https://developers.google.com/web/ilt/pwa/introduction-to-service-worker#what_is_a_service_worker\">\nService workers are a special type of web workers. A service worker is essentially a JavaScript file that runs separately from the main browser thread (or UI thread), intercepting network requests, caching or retrieving resources from the cache, and delivering push messages.\n</BlockQuote>\n\nWith the use of service workers, web apps can now deliver a custom offline experience. For example, YouTube and Spotify have a custom offline page. While searching for more examples, I found this [awesome sudoku game](https://sudoku.jull.dev/), which is completely available for offline use.\n\nLike that sudoku game, XCalc doesn’t need an active internet connection to work. So, as you may guess, I wanted to make XCalc completely offline, just like that game. So, I added a service worker to do that. It pre-caches all the required resources. After that, the resources will be loaded from the cache.\n\n<linkableH3 slug={slug}>\n<CustomLink href=\"https://webassembly.org\">\n\t\tWebAssembly\n\t </CustomLink>{\" \"}\n\t(<CustomLink href=\"https://www.assemblyscript.org\">AssemblyScript</CustomLink>)\n</linkableH3>\n\nWebAssembly (WASM, in short) is a new type of code that can be run inside web browsers. It is a low-level assembly-like language which runs with near-native performance.\nBut, **keep in mind that WASM is not intended to replace JS, and it won’t**.\n\nWebAssembly first appeared in 2017, but I came to know about it recently. I decided to use it in XCalc. I know that WebAssembly wasn't meant to be used on a calculator app like XCalc, But I chose to use it just for the sake of learning.\n\nC, C++, Rust can be compiled to WASM. But I don't know any of them before. And I didn't want to learn them. Fortunately, I came to know about AssemblyScript. AssemblyScript is a typescript-based language which compiles to WASM. With the familiar syntax, AssemblyScript appeared to be the best option for me. So, I chose to use it.\n\nGetting started with AssemblyScript was a little hard for me. But, maybe, that would have been easy if I read the documentation clearly.\n\n<linkableH2 slug={slug}>Conclusion</linkableH2>\nOverall, working on XCalc was a really great experience for me. There was a lot of fun and learning.\n\nHere is the main thing I learnt while building XCalc.\n\n**Read the documentation clearly**. This is one of my bad habits. I don't read the documentation completely. I always miss to notice something in every documentation I read. Because of that, I have even spent a significant amount of time, trying to find how to do a specific thing (which is already explained in the documentation). So, when you are reading a documentation for something, make sure to read it through. Don’t skip anything. When you get stuck with an error or bug, before starting searching it on google, make sure to check the official documentation.\n\nIf you have read this much, Thank you for your time. Have any questions? Feel free to [reach me out on Twitter](https://twitter.com/sahithyandev)\n","mdxSource":{"compiledSource":"var h=Object.defineProperty,d=Object.defineProperties;var u=Object.getOwnPropertyDescriptors;var i=Object.getOwnPropertySymbols;var s=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;var l=(e,t,a)=>t in e?h(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,o=(e,t)=>{for(var a in t||(t={}))s.call(t,a)&&l(e,a,t[a]);if(i)for(var a of i(t))r.call(t,a)&&l(e,a,t[a]);return e},c=(e,t)=>d(e,u(t));var p=(e,t)=>{var a={};for(var n in e)s.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(e!=null&&i)for(var n of i(e))t.indexOf(n)<0&&r.call(e,n)&&(a[n]=e[n]);return a};const makeShortcode=e=>function(a){return console.warn(\"Component \"+e+\" was not imported, exported, or provided by MDXProvider as global scope\"),mdx(\"div\",o({},a))},TableOfContents=makeShortcode(\"TableOfContents\"),CustomLink=makeShortcode(\"CustomLink\"),BlockQuote=makeShortcode(\"BlockQuote\"),layoutProps={},MDXLayout=\"wrapper\";function MDXContent(a){var n=a,{components:e}=n,t=p(n,[\"components\"]);return mdx(MDXLayout,c(o(o({},layoutProps),t),{components:e,mdxType:\"MDXLayout\"}),mdx(TableOfContents,{source:sourceContent,slug,mdxType:\"TableOfContents\"}),mdx(\"linkableH2\",{slug},\"Why I built XCalc?\"),mdx(\"p\",null,\"We all have a pre-installed calculator app on our devices (except iPad users). They provide us with basic and some advanced operations. For the majority of people, in most cases, that is more than enough.\"),mdx(\"p\",null,`But, as a Math lover, sometimes, I ran into some problems which can be solved easily on a computer (or a calculator), but still not included in any of these existing calculator apps.\nFor example, prime factorization. It's easy for a small set of numbers (like 500, 360). But on a computer, it can be done in seconds (or even milliseconds). But I have never seen that functionality included in a calculator. And this is only one example. This felt like a gap for me. That\\u2019s why I decided to develop a calculator app that has these extra functions. That\\u2019s what XCalc is.`),mdx(\"p\",null,\"Note that I only added the functions that are not available in those existing calculator apps. And I intentionally left out the functions like log or sqrt, because they are already available on the pre-installed calculator apps.\"),mdx(\"p\",null,\"So, what functions did I add? \",mdx(\"a\",o({parentName:\"p\"},{href:\"https://x-calc.vercel.app/help\"}),\"Here\"),\" is a list. \"),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},\"is-prime: checks if a number is a prime number\"),mdx(\"li\",{parentName:\"ul\"},\"factors: finds all the factors of a number\"),mdx(\"li\",{parentName:\"ul\"},\"lcm: finds the least common multiple of a list a numbers\"),mdx(\"li\",{parentName:\"ul\"},\"gcd: finds the greatest common divisor of a list a numbers\"),mdx(\"li\",{parentName:\"ul\"},\"factorial: finds the n-th factorial\"),mdx(\"li\",{parentName:\"ul\"},\"ratio: finds the minimum ratio in a list of numbers\"),mdx(\"li\",{parentName:\"ul\"},\"nck: finds the \",mdx(\"a\",o({parentName:\"li\"},{href:\"https://en.wikipedia.org/wiki/Binomial_coefficient\"}),\"binomial coefficient\"),\" denoted by (n k)\"),mdx(\"li\",{parentName:\"ul\"},\"prime-factorize: finds the prime factorization of the given number\")),mdx(\"p\",null,\"If you like the idea of XCalc, you can try it \",mdx(\"a\",o({parentName:\"p\"},{href:\"https://bit.ly/xcalc-web\"}),\"here\"),`. From the website, XCalc can be installed to your devices (I don\\u2019t know if it is supported on all operating systems and all browsers).\nAnd `,mdx(\"a\",o({parentName:\"p\"},{href:\"https://bit.ly/xcalc-app\"}),\"XCalc is available on Google Play Store\"),\" as well.\"),mdx(\"p\",null,\"If you are interested to see how XCalc is coded, Good news, XCalc is \",mdx(\"a\",o({parentName:\"p\"},{href:\"http://github.com/sahithyandev/xcalc\"}),\"open-sourced\"),\". If you find it hard to understand the code, let me know about that.\"),mdx(\"linkableH2\",{slug},\"How I built it\"),mdx(\"linkableH3\",{slug},mdx(CustomLink,{href:\"https://typescriptlang.org\",mdxType:\"CustomLink\"},\"TypeScript\")),mdx(\"p\",null,\"TypeScript is a strict syntactical superset of JavaScript and adds optional strict typing to the language. It compiles to JavaScript.\"),mdx(\"p\",null,\"I decided to bring it into the code base mainly for two reasons. The important one is \",mdx(\"strong\",{parentName:\"p\"},\"prevention of many little bugs\"),`. As TypeScript allows me to set types to everything, now I don\\u2019t have to be too concerned about the code now. I can be confident (in most cases) that I am not gonna run into any runtime errors.\nAnd the next one is, `,mdx(\"strong\",{parentName:\"p\"},\"reduced mind-overloading\"),\". Which means, now, I don\\u2019t have to memorize the function parameter types and object structures. My IDE's intellisense takes care of that.\"),mdx(\"linkableH3\",{slug},\"UI Design\"),mdx(\"p\",null,\"It's highly recommended to design the UI before coding it. \",mdx(\"a\",o({parentName:\"p\"},{href:\"https://www.youtube.com/watch?v=ZyAsNw7XZ1c\"}),\"Here's why\"),\". \"),mdx(\"p\",null,\"Hence, I decided to design the whole UI first (or at least try). I opened up \",mdx(\"a\",o({parentName:\"p\"},{href:\"https://figma.com\"}),\"Figma\"),\" and gave it a try. Here's what I designed.\"),mdx(\"img\",{alt:\"XCalc Old UI design\",src:\"/post__images/building-xcalc/xcalc-old-design.jpg\"}),mdx(\"p\",null,\"I went with it. Because, the important thing about XCalc is its functionality; not the UI.\"),mdx(\"p\",null,\"When I made XCalc completely working, (as always) I stopped working on it. After about 3 months, I came back. I decided to rewrite the whole app with new (better) technologies. As a part of that, I redesigned the UI. It turned out to be pretty great.\"),mdx(\"img\",{alt:\"XCalc New UI design\",src:\"/post__images/building-xcalc/xcalc-new-design.png\"}),mdx(\"linkableH3\",{slug},mdx(CustomLink,{href:\"https://reactjs.org\",mdxType:\"CustomLink\"},\"React\")),\"When I first started developing XCalc, I didn't use any front-end libraries. I wanted to write all the code by myself. The state of the app (the input), the dynamic UI rendering were all done by the code I wrote. At first, It worked without any problems.  But when I came back after 3 months, I understood none of it. That's when I realized that I should have used a front-end library.\",mdx(\"p\",null,\"When I started rewriting the app, I chose to go with React, which is my favorite front-end library.\"),mdx(\"p\",null,\"To be honest, the React code is not that good either. But it is a lot more readable than my code.\"),mdx(\"linkableH3\",{slug},mdx(CustomLink,{href:\"https://sass-lang.com\",mdxType:\"CustomLink\"},\"Sass\")),\"Sass is a pre-compiler for CSS. It provides some additional functionalities which results in a better developer experience. That\\u2019s the one and only reason I decided to use Sass.\",mdx(\"linkableH3\",{slug},\"Off-thread evaluations\"),'By default, the browser uses a single thread (\"main thread\") to run all the processes of a website. This is where the layout and paint are done. This is where the user events get processed. And also, this is where, the javascript runs. Which means, long-running JavaScript will block the thread, leading to an unresponsive page (== bad user experience)',mdx(\"p\",null,\"This is where web workers come into play. Web workers are a simple means for web content to run scripts on background threads. This will make sure the main thread is free from getting stuck. \",mdx(\"a\",o({parentName:\"p\"},{href:\"https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API/Using_web_workers\"}),\"Learn more about web workers on MDN\"),\".\"),mdx(\"p\",null,\"XCalc never blocked the main thread (on my laptop and my phone), it worked without any problems. There were no performance issues at all. But, on the low-end phones, performance issues might rise.\"),mdx(\"p\",null,`And, it's a good idea to use the main thread only for UI work. That's why the main thread is called \"UI thread\" on other platforms. So, I moved the evaluations of the input to a web worker. `),mdx(\"linkableH3\",{slug},\"Offline support\"),mdx(BlockQuote,{citationText:\"Google Developers Blog\",citationLink:\"https://developers.google.com/web/ilt/pwa/introduction-to-service-worker#what_is_a_service_worker\",mdxType:\"BlockQuote\"},\"Service workers are a special type of web workers. A service worker is essentially a JavaScript file that runs separately from the main browser thread (or UI thread), intercepting network requests, caching or retrieving resources from the cache, and delivering push messages.\"),mdx(\"p\",null,\"With the use of service workers, web apps can now deliver a custom offline experience. For example, YouTube and Spotify have a custom offline page. While searching for more examples, I found this \",mdx(\"a\",o({parentName:\"p\"},{href:\"https://sudoku.jull.dev/\"}),\"awesome sudoku game\"),\", which is completely available for offline use.\"),mdx(\"p\",null,\"Like that sudoku game, XCalc doesn\\u2019t need an active internet connection to work. So, as you may guess, I wanted to make XCalc completely offline, just like that game. So, I added a service worker to do that. It pre-caches all the required resources. After that, the resources will be loaded from the cache.\"),mdx(\"linkableH3\",{slug},mdx(CustomLink,{href:\"https://webassembly.org\",mdxType:\"CustomLink\"},\"WebAssembly\"),\" \",\"(\",mdx(CustomLink,{href:\"https://www.assemblyscript.org\",mdxType:\"CustomLink\"},\"AssemblyScript\"),\")\"),mdx(\"p\",null,`WebAssembly (WASM, in short) is a new type of code that can be run inside web browsers. It is a low-level assembly-like language which runs with near-native performance.\nBut, `,mdx(\"strong\",{parentName:\"p\"},\"keep in mind that WASM is not intended to replace JS, and it won\\u2019t\"),\".\"),mdx(\"p\",null,\"WebAssembly first appeared in 2017, but I came to know about it recently. I decided to use it in XCalc. I know that WebAssembly wasn't meant to be used on a calculator app like XCalc, But I chose to use it just for the sake of learning.\"),mdx(\"p\",null,\"C, C++, Rust can be compiled to WASM. But I don't know any of them before. And I didn't want to learn them. Fortunately, I came to know about AssemblyScript. AssemblyScript is a typescript-based language which compiles to WASM. With the familiar syntax, AssemblyScript appeared to be the best option for me. So, I chose to use it.\"),mdx(\"p\",null,\"Getting started with AssemblyScript was a little hard for me. But, maybe, that would have been easy if I read the documentation clearly.\"),mdx(\"linkableH2\",{slug},\"Conclusion\"),\"Overall, working on XCalc was a really great experience for me. There was a lot of fun and learning.\",mdx(\"p\",null,\"Here is the main thing I learnt while building XCalc.\"),mdx(\"p\",null,mdx(\"strong\",{parentName:\"p\"},\"Read the documentation clearly\"),\". This is one of my bad habits. I don't read the documentation completely. I always miss to notice something in every documentation I read. Because of that, I have even spent a significant amount of time, trying to find how to do a specific thing (which is already explained in the documentation). So, when you are reading a documentation for something, make sure to read it through. Don\\u2019t skip anything. When you get stuck with an error or bug, before starting searching it on google, make sure to check the official documentation.\"),mdx(\"p\",null,\"If you have read this much, Thank you for your time. Have any questions? Feel free to \",mdx(\"a\",o({parentName:\"p\"},{href:\"https://twitter.com/sahithyandev\"}),\"reach me out on Twitter\")))}MDXContent.isMDXComponent=!0;\n","scope":{}}},"__N_SSG":true}