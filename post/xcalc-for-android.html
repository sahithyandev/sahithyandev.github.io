<!DOCTYPE html><html lang="en"><head><title>XCalc for Android | Sahithyan</title><meta name="description" content="Sharing how &amp; why I developed XCalc as a native Android app"><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="shortcut icon" href="/favicon.ico" type="image/x-icon"><link rel="alternate" href="https://sahithyandev.github.io/feed.xml" type="application/rss+xml" title="RSS feed"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content="@sahithyandev"><meta property="og:type" content="website"><meta property="og:description" content="Sharing how &amp; why I developed XCalc as a native Android app"><meta property="og:title" content="XCalc for Android | Sahithyan"><meta property="og:url" content="sahithyandev.github.io/post/xcalc-for-android"><meta property="og:site_name" content="Sahithyan"><meta property="og:image" content="https://sahithyandev.github.io/og-images/xcalc-for-android.png"><meta property="og:image:alt" content="Sharing how &amp; why I developed XCalc as a native Android app"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="630"><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin=""><link rel="preload" as="style" onload='this.onload=null,this.rel="stylesheet"' class="google-fonts-link" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&amp;display=swap"><noscript><link class="google-fonts-link" rel="stylesheet" type="text/css"></noscript><script data-host="https://microanalytics.io" data-dnt="false" src="https://microanalytics.io/js/script.js" id="ZwSg9rf6GA" async="" defer=""></script><link rel="stylesheet" href="/global.css"><script>"serviceWorker"in navigator&&navigator.serviceWorker.register("/service-worker.js").catch((e=>{console.error("Error while initializing service worker",e)})),window.__supportCssHas=!0;try{document.querySelector("*:has(input:checked)")}catch(e){e instanceof DOMException&&(window.__supportCssHas=!1)}const theme=window.localStorage.getItem("theme");if(theme){function setTheme(){const e=document.querySelector(`input#theme-${theme}`);e?(e.checked=!0,window.__supportCssHas||document.documentElement.setAttribute("data-theme",theme)):requestAnimationFrame(setTheme)}requestAnimationFrame(setTheme)}</script><link rel="stylesheet" href="/route-post.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.css" crossorigin="anonymous" integrity="sha384-Xi8rHCmBmhbuyyhbI88391ZKP2dmfnOl4rT9ZfRI7mLTdk1wblIUnrIq35nqwEvC"></head><body><div id="nav-bar"><nav><a href="/" class="nav--logo" data-is-internal="">SAHTIHYAN</a><input type="checkbox" id="menu-toggle"><label for="menu-toggle" class="hamburger-icon"></label><ul><li><a href="/tidbits" class="nav--link" data-is-internal="">Tidbits</a></li><li><a href="/projects" class="nav--link" data-is-internal="">Projects</a></li><li><a href="/posts" class="nav--link" data-is-internal="">Posts</a></li><li><a href="/about" class="nav--link" data-is-internal="">About</a></li><li class="theme-switch-labels"><div class="one-push-switch"><input class="sr-only" type="radio" name="theme-switch" id="theme-auto" value="auto" checked=""><label for="theme-light" title="Change to light theme">auto</label><input class="sr-only" type="radio" name="theme-switch" id="theme-light" value="light"><label for="theme-dark" title="Change to dark theme">light</label><input class="sr-only" type="radio" name="theme-switch" id="theme-dark" value="dark"><label for="theme-auto" title="Use user-preferenced theme">dark</label></div></li></ul></nav></div><div id="root"><main><h1 class="post-title">XCalc for Android</h1><div class="post-meta"><span class="post-meta--release-date">22 January 2023</span><span class="post-meta--reading-time">4 min read</span><div class="tags-container"><span class="tag">experience</span><span class="tag">project</span></div></div><article><p>Phew, I am finally publishing this one. It has been in my drafts for more than a year(!!!) now.</p><section class="toc-container"><h3>Table Of Contents</h3><ol><li><a href="/post/xcalc-for-android#what's-xcalc?" data-is-internal="" class="styled-link">What's XCalc?</a></li><li><a href="/post/xcalc-for-android#why-for-android?" data-is-internal="" class="styled-link">Why for Android?</a><ul><li><a href="/post/xcalc-for-android#discoverability" data-is-internal="" class="styled-link">Discoverability</a></li><li><a href="/post/xcalc-for-android#bad-user-experience" data-is-internal="" class="styled-link">Bad User Experience</a></li></ul></li><li><a href="/post/xcalc-for-android#how-did-it-go?" data-is-internal="" class="styled-link">How did it go?</a><ul><li><a href="/post/xcalc-for-android#learning-a-new-language" data-is-internal="" class="styled-link">Learning a new language</a></li><li><a href="/post/xcalc-for-android#kotlin-had-no-&quot;eval&quot;" data-is-internal="" class="styled-link">Kotlin had no "eval"</a></li></ul></li></ol></section><h2 id="what's-xcalc?" class="linkable-head"><a href="/post/xcalc-for-android#what's-xcalc?" class="hashtag" data-is-internal="">#</a><span>What's XCalc?</span></h2><p>For those of you, who doesn’t know: XCalc is a calculator app which provides a few functions that a pre-installed calculator app doesn’t.<br>For example, the <em>isPrime</em> function checks whether the given number is a prime number. And the <em>primeFactorize</em> function factorizes a given number into primes.</p><p>The idea of building an app like XCalc has been in back of my head for a long time. I ultimately initiated the project around January 2021.</p><p>To learn about the development of XCalc, see <a href="https://sahithyandev.github.io/post/building-xcalc" target="_blank" rel="noopener noreferrer" class="styled-link">Building XCalc</a>.</p><h2 id="why-for-android?" class="linkable-head"><a href="/post/xcalc-for-android#why-for-android?" class="hashtag" data-is-internal="">#</a><span>Why for Android?</span></h2><p>XCalc was first developed as a Progressive Web App — a web app that can run offline. The app can also be installed on the user's device as well. By making a few minor changes, a PWA can be published to the Google Play Store as well (<a href="https://chromeos.dev/en/publish/pwa-in-play" target="_blank" rel="noopener noreferrer" class="styled-link">learn how here</a>).</p><p>That's really a lot to get from just developing a web app. Why did I develop a native Android app for XCalc then?</p><h3 id="discoverability" class="linkable-head"><a href="/post/xcalc-for-android#discoverability" class="hashtag" data-is-internal="">#</a><span>Discoverability</span></h3><p>XCalc is a niche app. It's target audience is already very narrow. I have put a lot of time and effort into the development XCalc. I want to maximize the number of people benefitting from it.</p><p>I thought a web app, would be the way to achieve that. Web apps run on browsers which majority of devices can run. And web apps are just a URL away. Users don't have to install anything (other than a web browser).<br>However, discoverability is an issue on the web.</p><p>Android and other platforms have a dedicated app store. These app stores function as a place for users to find apps. The web doesn’t have anything like that.</p><p>To overcome this issue, I published XCalc on Google Play Store after bundling it as a TWA. That lead to the next issue.</p><h3 id="bad-user-experience" class="linkable-head"><a href="/post/xcalc-for-android#bad-user-experience" class="hashtag" data-is-internal="">#</a><span>Bad User Experience</span></h3><p>Let's say a user installs XCalc (the bundled PWA) from Play Store. Installation succeeds. On their first visit, the app fails to load, showing the "No Internet" error page from Chrome.</p><p>The TWA required internet connectivity to load the app on first visit. There was nothing I could do to avoid this requirement.</p><p>There are two bad experiences in the mentioned example.</p><ul><li>An installed app, which, in theory, can work offline, shouldn't require internet connectivity on first load.</li><li>When an app's requirement of internet connection isn't met, <em>it</em> should show a fallback page. (not Chrome).</li></ul><p>After researching for a fair amount of time, I concluded that there are no easy ways to fix that. And I had two <em>rational</em> ways to resolve this issue.</p><ol><li>Pull out XCalc from Play Store and have it as a web app. hi</li><li>Build XCalc as a native Android app from scratch.</li></ol><p>The latter seemed the best one. Hence, I went with it.</p><h2 id="how-did-it-go?" class="linkable-head"><a href="/post/xcalc-for-android#how-did-it-go?" class="hashtag" data-is-internal="">#</a><span>How did it go?</span></h2><h3 id="learning-a-new-language" class="linkable-head"><a href="/post/xcalc-for-android#learning-a-new-language" class="hashtag" data-is-internal="">#</a><span>Learning a new language</span></h3><p>Native Android apps are developed using Java and/or Kotlin. I had to learn either of those to get started with native Android app development. As Kotlin is the <em>new</em> in the wild, I chose Kotlin. Learning Kotlin was not as easy as I initially thought; but it wasn't that hard either. The basics were very easy to grab.</p><h3 id="kotlin-had-no-&quot;eval&quot;" class="linkable-head"><a href="/post/xcalc-for-android#kotlin-had-no-&quot;eval&quot;" class="hashtag" data-is-internal="">#</a><span>Kotlin had no "eval"</span></h3><p>As XCalc is basically a calculator, it needs a <em>parser</em> and an <em>evaluator</em>, to evaluate the given expressions.</p><p>I have never implemented such programs before. I had no idea about where to start. And I wanted to get XCalc working as soon as I can. Developing a parser would cost me a huge amount of time. I thought to myself: "I could simply use the <code>eval</code> function to achieve the same". And that's what I did.</p><aside class="type-danger note"><p>The <code>eval</code> function is <em>evil</em> in most scenarios. Try not to use it.</p></aside><p>Unfortunately, Kotlin didn't have an eval-alternative. I don't think there will ever be one. I had no choices but to build my own parser.</p><p>Fortunately, I found a few write-ups on how to build a mathematical expression evaluator. Building them was very fun, to be honest. Fun, not <em>easy</em>. I learned a lot from building them.<br>Recently, I implemented a parser for XCalc Web as well. And stopped using the <code>eval</code> function. I should have done it earlier.</p></article></main><div class="post-share-section"><div><a href="https://twitter.com/search?q=https://sahithyandev.github.io/post/xcalc-for-android" target="_blank" rel="noopener noreferrer" class="styled-link">Discuss On Twitter</a></div><div><span class="share-span">Share this article on</span><a href="https://www.twitter.com/share?text=XCalc%20for%20Android%20by%20@sahithyandev&amp;url=https://sahithyandev.github.io/post/xcalc-for-android%7D" title="Twitter" target="_blank" rel="noopener noreferrer" class=""><svg class="icon icon-tabler icon-tabler-brand-twitter" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M22 4.01c-1 .49 -1.98 .689 -3 .99c-1.121 -1.265 -2.783 -1.335 -4.38 -.737s-2.643 2.06 -2.62 3.737v1c-3.245 .083 -6.135 -1.395 -8 -4c0 0 -4.182 7.433 4 11c-1.872 1.247 -3.739 2.088 -6 2c3.308 1.803 6.913 2.423 10.034 1.517c3.58 -1.04 6.522 -3.723 7.651 -7.742a13.84 13.84 0 0 0 .497 -3.753c-.002 -.249 1.51 -2.772 1.818 -4.013z"></path></svg></a></div></div></div><footer>© Sahithyan 2023</footer><script>function addThemeReminder(){const e=document.querySelectorAll("input[name=theme-switch]");0!=e.length?e.forEach((e=>{const t=e.id.replace("theme-","");e.addEventListener("input",(()=>{window.localStorage.setItem("theme",t),window.__supportCssHas||document.documentElement.setAttribute("data-theme",t)}))})):requestAnimationFrame(addThemeReminder)}requestIdleCallback((()=>{requestAnimationFrame(addThemeReminder)}))</script></body></html>