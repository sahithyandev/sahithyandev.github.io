<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Story of Building XCalc | Sahithyan</title>
    <meta
      name="description"
      content="Sharing how I built XCalc, an extended calculator."
    />

    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
    <link
      rel="alternate"
      href="https://sahithyandev.github.io/feed.xml"
      type="application/rss+xml"
      title="RSS feed"
    />

    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:site" content="@sahithyandev" />

    <meta property="og:type" content="website" />
    <meta
      property="og:description"
      content="Sharing how I built XCalc, an extended calculator."
    />
    <meta property="og:title" content="Story of Building XCalc | Sahithyan" />
    <meta property="og:url" content="sahithyandev.github.io" />
    <meta property="og:site_name" content="Sahithyan" />
    <meta
      property="og:image"
      content="https://sahithyandev.github.io/og-images/building-xcalc.png"
    />
    <meta
      property="og:image:alt"
      content="Sharing how I built XCalc, an extended calculator."
    />

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="" />

    <link
      rel="preload"
      as="style"
      onload="this.onload=null; this.rel='stylesheet'"
      class="google-fonts-link"
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&amp;display=swap"
    />

    <noscript>
      <link class="google-fonts-link" rel="stylesheet" type="text/css" />
    </noscript>

    <script
      data-host="https://microanalytics.io"
      data-dnt="false"
      src="https://microanalytics.io/js/script.js"
      id="ZwSg9rf6GA"
      async=""
      defer=""
    ></script>

    <link rel="stylesheet" href="/global.css" />

    <script>
      if ("serviceWorker" in navigator) {
        navigator.serviceWorker
          .register("/service-worker.js")
          .catch((error) => {
            console.error("Error while initializing service worker", error);
          });
      }
    </script>

    <link rel="stylesheet" href="/route-post.css" />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.css"
      crossorigin="anonymous"
      integrity="sha384-Xi8rHCmBmhbuyyhbI88391ZKP2dmfnOl4rT9ZfRI7mLTdk1wblIUnrIq35nqwEvC"
    />
  </head>

  <body>
    <div id="nav-bar">
      <nav>
        <a href="/" class="nav--logo" data-is-internal="">sahithyan</a
        ><input type="checkbox" id="menu-toggle" /><label
          for="menu-toggle"
          class="hamburger-icon"
        ></label>
        <ul>
          <li>
            <a href="/tidbits" class="nav--link" data-is-internal="">Tidbits</a>
          </li>
          <li>
            <a href="/projects" class="nav--link" data-is-internal=""
              >Projects</a
            >
          </li>
          <li>
            <a href="/posts" class="nav--link" data-is-internal="">Posts</a>
          </li>
          <li>
            <a href="/about" class="nav--link" data-is-internal="">About</a>
          </li>
        </ul>
      </nav>
    </div>
    <div id="root">
      <main>
        <h1 class="post-title">Story of Building XCalc</h1>
        <div class="post-meta">
          <span class="post-meta--release-date">10 June 2021</span
          ><span class="post-meta--reading-time">8 min read</span>
          <div class="tags-container">
            <span class="tag">experience</span><span class="tag">project</span>
          </div>
        </div>
        <article>
          <section class="toc-container">
            <h3>Table Of Contents</h3>
            <ol>
              <li>
                <a
                  href="/post/building-xcalc#why-i-built-xcalc?"
                  data-is-internal=""
                  class="styled-link"
                  >Why I built XCalc?</a
                >
              </li>
              <li>
                <a
                  href="/post/building-xcalc#how-i-built-it"
                  data-is-internal=""
                  class="styled-link"
                  >How I built it</a
                >
                <ul>
                  <li>
                    <a
                      href="/post/building-xcalc#typescript"
                      data-is-internal=""
                      class="styled-link"
                      >TypeScript</a
                    >
                  </li>
                  <li>
                    <a
                      href="/post/building-xcalc#ui-design"
                      data-is-internal=""
                      class="styled-link"
                      >UI Design</a
                    >
                  </li>
                  <li>
                    <a
                      href="/post/building-xcalc#react/preact"
                      data-is-internal=""
                      class="styled-link"
                      >React/Preact</a
                    >
                  </li>
                  <li>
                    <a
                      href="/post/building-xcalc#sass"
                      data-is-internal=""
                      class="styled-link"
                      >Sass</a
                    >
                  </li>
                  <li>
                    <a
                      href="/post/building-xcalc#off-thread-evaluations"
                      data-is-internal=""
                      class="styled-link"
                      >Off-thread evaluations</a
                    >
                  </li>
                  <li>
                    <a
                      href="/post/building-xcalc#offline-support"
                      data-is-internal=""
                      class="styled-link"
                      >Offline support</a
                    >
                  </li>
                  <li>
                    <a
                      href="/post/building-xcalc#webassembly-(assemblyscript)"
                      data-is-internal=""
                      class="styled-link"
                      >WebAssembly (AssemblyScript)</a
                    >
                  </li>
                </ul>
              </li>
              <li>
                <a
                  href="/post/building-xcalc#conclusion"
                  data-is-internal=""
                  class="styled-link"
                  >Conclusion</a
                >
              </li>
            </ol>
          </section>
          <h2 id="why-i-built-xcalc?" class="linkable-head">
            <a
              href="/post/building-xcalc#why-i-built-xcalc?"
              class="hashtag"
              data-is-internal=""
              >#</a
            ><span>Why I built XCalc?</span>
          </h2>
          <p>
            We all have a pre-installed calculator app on our devices (except
            iPad users). They provide us with basic and some advanced
            operations. For the majority of people, in most cases, that is more
            than enough.
          </p>
          <p>
            However, as a maths student, I sometimes encounter problems that can
            easily be solved with a computer or calculator, but none of the
            calculator apps I have found include the necessary functionality.
            For instance, prime factorization is a fairly difficult task to do
            manually. But a computer could accomplish it in the order of
            seconds. I have never seen this functionality included in a
            calculator app, and this gap inspired me to develop XCalc, a
            calculator app with those extra functions.
          </p>
          <p>
            Note that I only added the functions that are not available in those
            existing calculator apps. I intentionally left out the functions
            like log or sqrt, because they are already available in the
            pre-installed calculator apps.
          </p>
          <p>
            So, what functions did I add? Here is a list. (You can find them on
            <a
              href="https://x-calc.vercel.app/help"
              target="_blank"
              rel="noopener noreferrer"
              class="styled-link"
              >XCalc's Help page</a
            >
            as well)
          </p>
          <ul>
            <li>is-prime: checks if a number is a prime number</li>
            <li>factors: finds all the factors of a number</li>
            <li>lcm: finds the least common multiple of a list a numbers</li>
            <li>gcd: finds the greatest common divisor of a list a numbers</li>
            <li>factorial: finds the n-th factorial</li>
            <li>ratio: finds the minimum ratio in a list of numbers</li>
            <li>
              nck: finds the
              <a
                href="https://en.wikipedia.org/wiki/Binomial_coefficient"
                target="_blank"
                rel="noopener noreferrer"
                class="styled-link"
                >binomial coefficient</a
              >
              denoted by (n k)
            </li>
            <li>
              prime-factorize: finds the prime factorization of the given number
            </li>
          </ul>
          <p>
            If you like the idea of XCalc, you can try it
            <a
              href="https://bit.ly/xcalc-web"
              target="_blank"
              rel="noopener noreferrer"
              class="styled-link"
              >here</a
            >. From the website, XCalc can be installed to your devices (I don’t
            know if it is supported on all operating systems and all browsers).
            And
            <a
              href="https://bit.ly/xcalc-app"
              target="_blank"
              rel="noopener noreferrer"
              class="styled-link"
              >XCalc is available on Google Play Store</a
            >
            as well.
          </p>
          <p>
            If you are interested to see how XCalc is coded, Good news, XCalc's
            source code is available
            <a
              href="http://github.com/sahithyandev/xcalc"
              target="_blank"
              rel="noopener noreferrer"
              class="styled-link"
              >on GitHub</a
            >.
          </p>
          <h2 id="how-i-built-it" class="linkable-head">
            <a
              href="/post/building-xcalc#how-i-built-it"
              class="hashtag"
              data-is-internal=""
              >#</a
            ><span>How I built it</span>
          </h2>
          <p>
            Before you go on, you should note that this section is about the Web
            version of XCalc (not the Android one).
          </p>
          <h3 id="typescript" class="linkable-head">
            <a
              href="/post/building-xcalc#typescript"
              class="hashtag"
              data-is-internal=""
              >#</a
            ><span
              ><a
                href="https://typescriptlang.org"
                target="_blank"
                rel="noopener noreferrer"
                class="styled-link"
                >TypeScript</a
              ></span
            >
          </h3>
          <p>
            TypeScript is a strict syntactical superset of JavaScript and adds
            optional strict typing to the language. It compiles to JavaScript.
          </p>
          <p>
            I decided to bring it into the code base mainly for two reasons. The
            primary reason is <strong>prevention of numerous tiny bugs</strong>.
            As TypeScript allows me to set types to everything, now I don’t have
            to worry as much about the code and be confident that I won't
            encounter runtime errors in most cases.<br />
            The second reason is, <strong>reduced mental overload</strong>.
            Which means, now, I don’t have to remember the function parameters
            and object structures. My IDE's intellisense takes care of that.
          </p>
          <h3 id="ui-design" class="linkable-head">
            <a
              href="/post/building-xcalc#ui-design"
              class="hashtag"
              data-is-internal=""
              >#</a
            ><span>UI Design</span>
          </h3>
          <p>
            When starting with a new app, it's recommended to design the UI
            before starting the development.
            <a
              href="https://www.youtube.com/watch?v=ZyAsNw7XZ1c"
              target="_blank"
              rel="noopener noreferrer"
              class="styled-link"
              >Here's a video from DesignCourse explaining why</a
            >.
          </p>
          <p>
            Hence, I decided to design (or at least try to) the whole UI first.
            I opened up
            <a
              href="https://figma.com"
              target="_blank"
              rel="noopener noreferrer"
              class="styled-link"
              >Figma</a
            >
            and gave it a shot. Here's what I designed.
          </p>
          <img
            alt="XCalc Old UI design"
            src="/post__images/building-xcalc/xcalc-old-design.jpg"
            class="block"
            width="375"
            height="667"
          />
          <p>
            Even though it's a dull design, I went with it. Because, the
            important thing about XCalc is its functionality; not the UI.
          </p>
          <p>
            After getting XCalc to work basically, I stopped working on it for
            about 3 months. When I returned to the project, I decided to rewrite
            the whole app with new (better) technologies. As a part of that, I
            redesigned the UI. It turned out to be pretty great.
          </p>
          <img
            alt="XCalc New UI design"
            src="/post__images/building-xcalc/xcalc-new-design.png"
            class="block"
            width="1366"
            height="768"
          />
          <h3 id="react/preact" class="linkable-head">
            <a
              href="/post/building-xcalc#react/preact"
              class="hashtag"
              data-is-internal=""
              >#</a
            ><span
              ><a
                href="https://reactjs.org"
                target="_blank"
                rel="noopener noreferrer"
                class="styled-link"
                >React</a
              >/<a
                href="https://preactjs.org"
                target="_blank"
                rel="noopener noreferrer"
                class="styled-link"
                >Preact</a
              ></span
            >
          </h3>
          <p>
            When I first started developing XCalc, I didn't use any front-end
            libraries and instead I wanted to write all the code by myself. I
            wrote code to manage both the state of the app and the dynamic UI
            rendering, and it worked fine. But when I returned to the project
            after about the time gap, I found that I didn't understand any of
            the code I had initially written — it was a mess. That's when I
            realized that I should use a front-end library.
          </p>
          <p>
            While rewriting the app, I chose to go with React, which is my
            favorite front-end library.
          </p>
          <p>
            To be honest, the React code was not that good either. But it was a
            lot more readable than my initial code.
          </p>
          <p>
            Recently, XCalc has started using Preact, instead of React. Preact
            is just like React but faster and lighter.
          </p>
          <h3 id="sass" class="linkable-head">
            <a
              href="/post/building-xcalc#sass"
              class="hashtag"
              data-is-internal=""
              >#</a
            ><span
              ><a
                href="https://sass-lang.com"
                target="_blank"
                rel="noopener noreferrer"
                class="styled-link"
                >Sass</a
              ></span
            >
          </h3>
          <p>
            Sass is a pre-compiler for CSS. It provides some additional
            functionalities which results in a better developer experience.
            That’s the one and only reason I decided to use Sass.
          </p>
          <h3 id="off-thread-evaluations" class="linkable-head">
            <a
              href="/post/building-xcalc#off-thread-evaluations"
              class="hashtag"
              data-is-internal=""
              >#</a
            ><span>Off-thread evaluations</span>
          </h3>
          <p>
            By default, the browser uses a single thread ("main thread") to run
            all the processes of a website. This is where the layout and paint
            are done; the user events get processed; and the JavaScript runs.
            Which means, long-running JavaScript will block the thread, leading
            to an unresponsive page (== bad user experience)
          </p>
          <p>
            This is where web workers come into play. Web workers are a simple
            means for web content to run scripts on background threads. This
            will make sure the main thread is free from getting stuck.
            <a
              href="https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API/Using_web_workers"
              target="_blank"
              rel="noopener noreferrer"
              class="styled-link"
              >Learn more about web workers on MDN</a
            >.
          </p>
          <p>
            XCalc never blocked the main thread (on my laptop and my phone), it
            worked without any problems. There were no performance issues at
            all. But, on the low-end phones, performance issues might rise.
          </p>
          <p>
            And, it's a good idea to use the main thread only for UI work.
            That's why the main thread is called "UI thread" on other platforms.
            So, I moved the evaluations of the input to a web worker.
          </p>
          <h3 id="offline-support" class="linkable-head">
            <a
              href="/post/building-xcalc#offline-support"
              class="hashtag"
              data-is-internal=""
              >#</a
            ><span>Offline support</span>
          </h3>
          <figure>
            <blockquote
              cite="https://developers.google.com/web/ilt/pwa/introduction-to-service-worker#what_is_a_service_worker"
            >
              Service workers are a special type of web workers. A service
              worker is essentially a JavaScript file that runs separately from
              the main browser thread (or UI thread), intercepting network
              requests, caching or retrieving resources from the cache, and
              delivering push messages.
            </blockquote>
            <figcaption>
              <cite
                >Google Developers Blog(<a
                  href="https://developers.google.com/web/ilt/pwa/introduction-to-service-worker#what_is_a_service_worker"
                  target="_blank"
                  rel="noopener noreferrer"
                  class="styled-link"
                  >@</a
                >)</cite
              >
            </figcaption>
          </figure>
          <p>
            With the use of service workers, web apps can now deliver a custom
            offline experience. For example, YouTube and Spotify have a custom
            offline page. While searching for more examples, I found this
            <a
              href="https://sudoku.jull.dev/"
              target="_blank"
              rel="noopener noreferrer"
              class="styled-link"
              >awesome sudoku game</a
            >, which is completely available for offline use.
          </p>
          <p>
            Like that sudoku game, XCalc doesn’t need an active internet
            connection to work. So, as you may guess, I wanted to make XCalc
            completely offline, just like that game. So, I added a service
            worker to do that. It pre-caches all the required resources. After
            that, the resources will be loaded from the cache.
          </p>
          <h3 id="webassembly-(assemblyscript)" class="linkable-head">
            <a
              href="/post/building-xcalc#webassembly-(assemblyscript)"
              class="hashtag"
              data-is-internal=""
              >#</a
            ><span
              ><a
                href="https://webassembly.org"
                target="_blank"
                rel="noopener noreferrer"
                class="styled-link"
                >WebAssembly</a
              >
              (<a
                href="https://www.assemblyscript.org"
                target="_blank"
                rel="noopener noreferrer"
                class="styled-link"
                >AssemblyScript</a
              >)</span
            >
          </h3>
          <p>
            WebAssembly (WASM, in short) is a new type of code that can be run
            inside web browsers. It is a low-level assembly-like language which
            runs with near-native performance. But,
            <strong
              >keep in mind that WASM is not intended to replace JS, and it
              won’t</strong
            >.
          </p>
          <p>
            I recently became aware of WebAssembly, which was first introduced
            in 2017, and decided to use it in XCalc. Although WebAssembly wasn't
            meant to be used in a calculator app like XCalc, I chose to use it
            for learning and experimentation.
          </p>
          <p>
            C, C++, Rust can be compiled to WASM. But I didn't know any of them
            (I still don't). And I didn't want to learn them. Fortunately, I
            came to know about AssemblyScript. AssemblyScript is a
            typescript-based language which compiles to WASM. With the familiar
            syntax, AssemblyScript appeared to be the best option for me. So, I
            chose to use it.
          </p>
          <p>
            Getting started with AssemblyScript was a little hard for me. But,
            maybe, that was mostly because I didn't read the documentation
            clearly.
          </p>
          <h2 id="conclusion" class="linkable-head">
            <a
              href="/post/building-xcalc#conclusion"
              class="hashtag"
              data-is-internal=""
              >#</a
            ><span>Conclusion</span>
          </h2>
          <p>
            Overall, working on XCalc was a really great experience for me.
            There was a lot of fun and learning.
          </p>
          <p>Here is the main thing I learnt while building XCalc.</p>
          <p>
            <strong>Read the documentation clearly</strong>. One of my bad
            habits is not reading documentation thoroughly. I always miss
            something in every documentation I read, which has caused me to
            spend a significant amount of time trying to figure out how to do
            something that was already explained in the documentation. When
            reading documentation for something, it is important to read it
            thoroughly and not skip anything. When you encounter a bug or an
            error, make sure your have checked the official documentation,
            before searching for solutions in other places.
          </p>
          <p>
            If you have read this much, Thank you for your time. Have any
            questions? Feel free to
            <a
              href="https://twitter.com/sahithyandev"
              target="_blank"
              rel="noopener noreferrer"
              class="styled-link"
              >reach me out on Twitter</a
            >
          </p>
        </article>
      </main>
      <div class="post-share-section">
        <div>
          <a
            href="https://twitter.com/search?q=https://sahithyandev.github.io/post/building-xcalc"
            target="_blank"
            rel="noopener noreferrer"
            class="styled-link"
            >Discuss On Twitter</a
          >
        </div>
        <div>
          <span class="share-span">Share this article on</span
          ><a
            href="https://www.twitter.com/share?text=Story%20of%20Building%20XCalc%20by%20@sahithyandev&amp;url=https://sahithyandev.github.io/post/building-xcalc%7D"
            title="Twitter"
            target="_blank"
            rel="noopener noreferrer"
            class=" "
            ><svg
              class="icon icon-tabler icon-tabler-brand-twitter"
              width="24"
              height="24"
              viewBox="0 0 24 24"
              stroke-width="2"
              stroke="currentColor"
              fill="none"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
              <path
                d="M22 4.01c-1 .49 -1.98 .689 -3 .99c-1.121 -1.265 -2.783 -1.335 -4.38 -.737s-2.643 2.06 -2.62 3.737v1c-3.245 .083 -6.135 -1.395 -8 -4c0 0 -4.182 7.433 4 11c-1.872 1.247 -3.739 2.088 -6 2c3.308 1.803 6.913 2.423 10.034 1.517c3.58 -1.04 6.522 -3.723 7.651 -7.742a13.84 13.84 0 0 0 .497 -3.753c-.002 -.249 1.51 -2.772 1.818 -4.013z"
              ></path></svg
          ></a>
        </div>
      </div>
    </div>
    <footer>© Sahithyan 2022</footer>
  </body>
</html>
